# Game Service

Мастер-система игр для проекта GameHub. Через этот сервис происходят CRUD-операции.

О GameHub: https://github.com/sariya23/game_service/blob/master/doc/about.md

Контракт: https://github.com/sariya23/api_game_service/blob/master/proto/game/game.proto

## Локальный запуск

### Dev

Режим для добавления каких-то фич. Отличается тем, что образ 
приложения не билдится, что сильно экономит время. В этом режиме
в докере поднимаются база, s3 и подобные сервисы.

**Команды для управления:**
- `make run` - запуск `cmd/main.go` файла
- `make test` - запуск юнит-тестов
- `make infra` - запуск внешних зависимостей в докере
- `make migrate` - накатка миграций

### Local

Режим для использования сервиса как внешней зависимости или для e2e-тестирования. Для этого билдится
образ приложения и все компоненты запускаются в докере

**Команды для управления**
- `make service_compose_up` - весь сервис поднимается в докере
- `make service_migrate_inner` - накатка миграций внутри контейнеров, обращение там идет по именам сервисов
- `make service_migrate_outer` - накатка миграций вне контейнеров
- `make service_compose_down` - оставновка и удаление образов приложения

### Test

Режим для запуска интеграционных тестов. Практически ничем не отличается от Local.
**Команды для управления**
- `test_compose_up` - поднять все компоненты в докере
- `test_migrate` - накатка миграций внутри контейнеров
- `test_integrations` - запуск интеграционных тестов
- `test_compose_down` - удаление контейнеров